<% include layout/header %> 
<% include layout/navbar %>

<div id="fight" class="container-fluid bg-3 text-center">    
    <h3><%= page %></h3>
    <h3>État du combat : {{ state }}</h3>
    <div class="row">
        <div class="col-sm-4">
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        </div>
        <div class="col-sm-4"> 
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        </div>
        <div class="col-sm-4"> 
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
        </div>
    </div>
</div>

<script type="text/javascript" src="/socket.io/socket.io.js"></script>
<script type="text/javascript">
$(document).ready(function () {
    var fight = new Vue({
        el: '#fight',
        data: {
            state: "Chargement..."
        }
    });

    var socket = io('/viewer');
    socket.on('game_status', function (data) {
        fight.state = data.state;
    });
    socket.on('new_connexion', function (data) {
        console.log(data);
        socket.emit('recu', {reception: 'OK'});
    });
    socket.on('new_viewer', function () {
        console.log("Un nouveau spectateur est arrivé");
    });
    socket.on('new_player', function () {
        console.log("Un nouveau joueur est arrivé");
    });
});
</script>

<% include layout/footer %>
